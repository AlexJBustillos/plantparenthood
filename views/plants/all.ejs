<header class="plants-hero">
	<h1>Plants</h1>
		<% if(plants.length > 0) { %>
			<% include ../partials/searchbar %>
		<% } %>
</header>
<% if(plants.length <= 0) { %>
	<h2>Nothing in the database yet</h2>
<% } else { %>
	<div class="container">
		<div class="ui stackable four column grid">
		<% plants.sort(function(a, b){ %>
			<% var x = a.name.toLowerCase(); %>
    		<% var y = b.name.toLowerCase(); %>
    		<% if (x < y) {return -1;} %>
    		<% if (x > y) {return 1;} %>
    		<% return 0; %>
		<% }).forEach(function(item){ %>
			<div class="column">
				<% include ../partials/plantgrid %>
				<% if(currentUser){ %>

					<% if (userPlants){ %>
						<% var match = userPlants.find(o => o.name === item.name) %>
					<% } %>
					
	     			<% if (match) { %>

	       				<a href="/plants/<%= item.id %>" class="delete-plant">
							<button class="ui labeled icon mini basic button"><i class="remove icon"></i>
  							Delete Plant
						</button></a>

	     			<% } else { %>
	        			<form method="post" action="/plants">
							<input type="hidden" name="id" value="<%= item.id %>">
							<button type="submit" class="ui labeled icon mini button">
	  							<i class="plus icon"></i>
	  							Add Plant
							</button>
						</form>	
	      			<% } %>
								
				<% } else { %>
					<a href="/auth/login">
						<button class="ui labeled icon tiny button">
  							<i class="plus icon"></i>
  							Add Plant
						</button>
					</a>
				<% } %>
			</div>
		<% }); %>
	</div>
</div>
	<a href="#" alt="Back to Top">Top</a>
<% } %>